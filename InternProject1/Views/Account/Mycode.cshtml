<div class="text-center">
    <h3>Your Clock-In QR Code</h3>
    <p class="text-muted small">Regenerates every 5 minutes for security</p>
    <hr />
    <img id="qrCodeImage"
         src="@Url.Action("Generate", "QRCode", new { employeeId = Context.Session.GetInt32("UserID") })"
         style="width:300px; border: 10px solid white; box-shadow: 0 0 10px rgba(0,0,0,0.1);" />
    <p class="mt-3">Scan this code at the kiosk to clock in.</p>
</div>

<script>
    // Refresh the QR code image every 5 minutes (300,000 milliseconds)
    setInterval(function () {
        var img = document.getElementById('qrCodeImage');
        var baseUrl = '@Url.Action("Generate", "QRCode", new { employeeId = Context.Session.GetInt32("UserID") })';

        // Append a timestamp to force the browser to bypass the cache and fetch a new one
        img.src = baseUrl + '&t=' + new Date().getTime();
        console.log("QR Code Refreshed");
    }, 300000);
</script>